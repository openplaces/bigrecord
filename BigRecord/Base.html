<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf8" />
<title>Class: BigRecord::Base</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (B)</a> &raquo; 
    <span class='title'><a href="../BigRecord.html" title="BigRecord (module)">BigRecord</a></span>
     &raquo; 
    <span class="title">Base</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: BigRecord::Base 
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><a href="Model.html" title="BigRecord::Model (class)">Model</a></span>
      
        <ul class="fullTree">
          <li><a href="../Object.html" title="Object (class)">Object</a></li>
          
            <li class="next"><a href="Model.html" title="BigRecord::Model (class)">Model</a></li>
          
            <li class="next">BigRecord::Base</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/big_record/base.rb<span class="defines">,<br />
  lib/big_record/connection_adapters/hbase_adapter.rb,<br /> lib/big_record/connection_adapters/cassandra_adapter.rb,<br /> lib/big_record/connection_adapters/hbase_rest_adapter.rb,<br /> lib/big_record/connection_adapters/abstract/connection_specification.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Defined Under Namespace</h2>
<p class="children">
   
    
   
    
      <strong class="classes">Classes:</strong> <a href="Base/ConnectionSpecification.html" title="BigRecord::Base::ConnectionSpecification (class)">ConnectionSpecification</a>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="VALID_FIND_OPTIONS-constant" class="">VALID_FIND_OPTIONS =
          
        </dt>
        <dd><pre class="code"><span class='lbrack token'>[</span><span class='symbol val'>:limit</span><span class='comma token'>,</span> <span class='symbol val'>:offset</span><span class='comma token'>,</span> <span class='symbol val'>:include</span><span class='comma token'>,</span> <span class='symbol val'>:view</span><span class='comma token'>,</span> <span class='symbol val'>:versions</span><span class='comma token'>,</span> <span class='symbol val'>:timestamp</span><span class='comma token'>,</span>
<span class='symbol val'>:include_deleted</span><span class='comma token'>,</span> <span class='symbol val'>:force_reload</span><span class='comma token'>,</span> <span class='symbol val'>:columns</span><span class='comma token'>,</span> <span class='symbol val'>:stop_row</span><span class='rbrack token'>]</span>
</pre></dd>
      
        <dt id="verification_timeout-classvariable" class="">@@verification_timeout =
          
        </dt>
        <dd><pre class="code"><span class='integer val'>0</span>
</pre></dd>
      
        <dt id="defined_connections-classvariable" class="">@@defined_connections =
          <div class="docstring">
  <div class="discussion">
    <p>
The class -&gt; [adapter_method, config] map
</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='lbrace token'>{</span><span class='rbrace token'>}</span>
</pre></dd>
      
        <dt id="active_connections-classvariable" class="">@@active_connections =
          <div class="docstring">
  <div class="discussion">
    <p>
The class -&gt; thread id -&gt; adapter cache. (class -&gt; adapter if not
allow_concurrency)
</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='lbrace token'>{</span><span class='rbrace token'>}</span>
</pre></dd>
      
    </dl>
  


  
  
  
  
  <h3 class="inherited">Constants inherited from <a href="Model.html" title="BigRecord::Model (class)">Model</a></h3>
  <p class="inherited"><a href="Model.html#ID_FIELD_SEPARATOR-constant" title="BigRecord::Model::ID_FIELD_SEPARATOR (constant)">ID_FIELD_SEPARATOR</a>, <a href="Model.html#ID_WHITE_SPACE_CHAR-constant" title="BigRecord::Model::ID_WHITE_SPACE_CHAR (constant)">ID_WHITE_SPACE_CHAR</a></p>

  <h2>Instance Attribute Summary</h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#modified_attributes-instance_method" title="#modified_attributes (instance method)">- (Object) <strong>modified_attributes</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute modified_attributes.
</p>
</div></span>
  
</li>

    
  </ul>


  
    <h2>Class Method Summary</h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active_connection_name-class_method" title="active_connection_name (class method)">+ (Object) <strong>active_connection_name</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#allow_concurrency%3D-class_method" title="allow_concurrency= (class method)">+ (Object) <strong>allow_concurrency</strong>(threaded) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
set concurrency support flag (not thread safe, like most of the methods in
this file).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#base_class-class_method" title="base_class (class method)">+ (Class) <strong>base_class</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
The base class which inherits BigRecord::Base directly.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cassandra_connection-class_method" title="cassandra_connection (class method)">+ (Object) <strong>cassandra_connection</strong>(config) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear_active_connection_name-class_method" title="clear_active_connection_name (class method)">+ (Object) <strong>clear_active_connection_name</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear_active_connections%21-class_method" title="clear_active_connections! (class method)">+ (Object) <strong>clear_active_connections!</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Clears the cache which maps classes to connections.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear_reloadable_connections%21-class_method" title="clear_reloadable_connections! (class method)">+ (Object) <strong>clear_reloadable_connections!</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Clears the cache which maps classes.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#columns_to_find-class_method" title="columns_to_find (class method)">+ (Object) <strong>columns_to_find</strong>(options = {}) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Return the list of fully qualified column names, i.e.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#connected%3F-class_method" title="connected? (class method)">+ (Boolean) <strong>connected?</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns true if a connection that&#8217;s accessible to this class have
already been opened.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#connection-class_method" title="connection (class method)">+ (Object) <strong>connection</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the connection currently associated with the class.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#connection%3D-class_method" title="connection= (class method)">+ (Object) <strong>connection</strong>(spec) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Set the connection for the class.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create-class_method" title="create (class method)">+ (Object) <strong>create</strong>(attrs = nil) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Creates an object, instantly saves it as a record (if the validation
permits it), and returns it.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_column_prefix-class_method" title="default_column_prefix (class method)">+ (Object) <strong>default_column_prefix</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_columns-class_method" title="default_columns (class method)">+ (Object) <strong>default_columns</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Default columns to create with the model, such as primary key.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_family-class_method" title="default_family (class method)">+ (Object) <strong>default_family</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Get the default column family used to store attributes that have no column
family set explicitly.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_views-class_method" title="default_views (class method)">+ (Object) <strong>default_views</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Return the hash of default views which consist of all columns and the
:default named views.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete-class_method" title="delete (class method)">+ (Object) <strong>delete</strong>(id) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Deletes the record with the given <tt>id</tt> without instantiating an
object first.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_all-class_method" title="delete_all (class method)">+ (Object) <strong>delete_all</strong>(conditions = nil) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Deletes all the records that match the <tt>condition</tt> without
instantiating the objects first (and hence not calling the destroy method).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#destroy-class_method" title="destroy (class method)">+ (Object) <strong>destroy</strong>(id) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Destroys the record with the given <tt>id</tt> by instantiating the object
and calling #destroy (all the callbacks are the triggered).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#destroy_all-class_method" title="destroy_all (class method)">+ (Object) <strong>destroy_all</strong>(conditions = nil) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Destroys the objects for all the records that match the <tt>condition</tt>
by instantiating each object and calling the destroy method.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#establish_connection-class_method" title="establish_connection (class method)">+ (Object) <strong>establish_connection</strong>(spec = nil) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Establishes the connection to the database.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#exists%3F-class_method" title="exists? (class method)">+ (Boolean) <strong>exists?</strong>(id) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns true if the given <tt>id</tt> represents the primary key of a
record in the database, false otherwise.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#families-class_method" title="families (class method)">+ (Object) <strong>families</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Return the list of families for this class.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find-class_method" title="find (class method)">+ (Object) <strong>find</strong>(*args) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hbase_connection-class_method" title="hbase_connection (class method)">+ (Object) <strong>hbase_connection</strong>(config) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Establishes a connection to the database that&#8217;s used by all Active
Record objects.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hbase_rest_connection-class_method" title="hbase_rest_connection (class method)">+ (Object) <strong>hbase_rest_connection</strong>(config) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Establishes a connection to the database that&#8217;s used by all Active
Record objects.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inherited-class_method" title="inherited (class method)">+ (Object) <strong>inherited</strong>(child) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#log_connections-class_method" title="log_connections (class method)">+ (Object) <strong>log_connections</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
connection state logging.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#primary_key-class_method" title="primary_key (class method)">+ (Object) <strong>primary_key</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Return the name of the primary key.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_connection-class_method" title="remove_connection (class method)">+ (Object) <strong>remove_connection</strong>(klass = self) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Remove the connection for this class.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#retrieve_connection-class_method" title="retrieve_connection (class method)">+ (Object) <strong>retrieve_connection</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Locate the connection of the nearest super class.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#scan-class_method" title="scan (class method)">+ (Object) <strong>scan</strong>(options = {}, &amp;code) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
HBase scanner utility &#8212; scans the table and executes code on each
record.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_default_family-class_method" title="set_default_family (class method)">+ (Object) <strong>set_default_family</strong>(name) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Set the default column family used to store attributes that have no column
family set explicitly.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_table_name-class_method" title="set_table_name (class method)">+ (Object) <strong>set_table_name</strong>(name) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#single_threaded_active_connections-class_method" title="single_threaded_active_connections (class method)">+ (Object) <strong>single_threaded_active_connections</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#table_name-class_method" title="table_name (class method)">+ (Object) <strong>table_name</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#thread_safe_active_connections-class_method" title="thread_safe_active_connections (class method)">+ (Object) <strong>thread_safe_active_connections</strong> </a>
    

    
      (also: active_connections)
    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Retrieve the connection cache.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#truncate-class_method" title="truncate (class method)">+ (Object) <strong>truncate</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Truncate the table for this model.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update-class_method" title="update (class method)">+ (Object) <strong>update</strong>(id, attributes) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Finds the record from the passed <tt>id</tt>, instantly saves it with the
passed <tt>attributes</tt> (if the validation permits it), and returns it.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_all-class_method" title="update_all (class method)">+ (Object) <strong>update_all</strong>(updates, conditions = nil) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Updates all records with the SET-part of an SQL update statement in
<tt>updates</tt> and returns an integer with the number of rows updated.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#verify_active_connections%21-class_method" title="verify_active_connections! (class method)">+ (Object) <strong>verify_active_connections!</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Verify active connections.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#view-class_method" title="view (class method)">+ (Object) <strong>view</strong>(name, *columns) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Macro for defining a named view to a list of columns.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#view_names-class_method" title="view_names (class method)">+ (Object) <strong>view_names</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Get a list of view names defined by <tt><a href="#view-class_method" title="BigRecord::Base.view (method)">view</a></tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#views-class_method" title="views (class method)">+ (Object) <strong>views</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Get a list of all the views defined by the <tt><a href="#view-class_method" title="BigRecord::Base.view (method)">view</a></tt> macro for the model.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#views_hash-class_method" title="views_hash (class method)">+ (Object) <strong>views_hash</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Get the full hash of views consisting of the name as keys, and the
<tt><a href="ConnectionAdapters/View.html" title="BigRecord::ConnectionAdapters::View (class)">ConnectionAdapters::View</a></tt> views.
</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>Instance Method Summary</h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%5B%5D-instance_method" title="#[] (instance method)">- (Object) <strong>[]</strong>(attr_name) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of the attribute identified by <tt>attr_name</tt> after
it has been typecast (for example, &quot;2004-12-12&quot; in a data column
is cast to a date object, like Date.new(2004, 12, 12)).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#connection-instance_method" title="#connection (instance method)">- (Object) <strong>connection</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the connection currently associated with the class.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#destroy-instance_method" title="#destroy (instance method)">- (Object) <strong>destroy</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Deletes the record in the database and freezes this instance to reflect
that no changes should be made (since they can&#8217;t be persisted).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Base) <strong>initialize</strong>(attrs = nil) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
New objects can be instantiated as either empty (pass no construction
parameter) or pre-set with attributes but not yet saved (pass a hash with
key names matching the associated table column names).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_loaded%3F-instance_method" title="#is_loaded? (instance method)">- (Boolean) <strong>is_loaded?</strong>(name) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#new_record%3F-instance_method" title="#new_record? (instance method)">- (Boolean) <strong>new_record?</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns true if this object hasn&#8217;t been saved yet &#8212; that is, a
record for the object doesn&#8217;t exist yet.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_attribute-instance_method" title="#read_attribute (instance method)">- (Object) <strong>read_attribute</strong>(attr_name, options = {}) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of the attribute identified by <tt>attr_name</tt> after
it has been typecast (for example, &quot;2004-12-12&quot; in a data column
is cast to a date object, like Date.new(2004, 12, 12)).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_family_attributes-instance_method" title="#read_family_attributes (instance method)">- (Object) <strong>read_family_attributes</strong>(attr_name) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Read an attribute that defines a column family.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#save-instance_method" title="#save (instance method)">- (Object) <strong>save</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><ul>
<li>No record exists: Creates a new record with values matching those of the
object attributes.

</li>
</ul>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#save%21-instance_method" title="#save! (instance method)">- (Object) <strong>save!</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Attempts to save the record, but instead of just returning false if it
couldn&#8217;t happen, it raises a RecordNotSaved exception.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_loaded-instance_method" title="#set_loaded (instance method)">- (Object) <strong>set_loaded</strong>(name) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_attribute-instance_method" title="#update_attribute (instance method)">- (Object) <strong>update_attribute</strong>(name, value) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Updates a single attribute and saves the record.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_attributes-instance_method" title="#update_attributes (instance method)">- (Object) <strong>update_attributes</strong>(attributes) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Updates all the attributes from the passed-in Hash and saves the record.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_attributes%21-instance_method" title="#update_attributes! (instance method)">- (Object) <strong>update_attributes!</strong>(attributes) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Updates an object just like Base.update_attributes but calls save! instead
of save so an exception is raised if the record is invalid.
</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <a href="Model.html" title="BigRecord::Model (class)">Model</a></h3>
  <p class="inherited"><a href="Model.html#%3D%3D-instance_method" title="BigRecord::Model#== (method)">#==</a>, <a href="Model.html#%3D%3D%3D-class_method" title="BigRecord::Model.=== (method)">===</a>, <a href="Model.html#%5B%5D%3D-instance_method" title="BigRecord::Model#[]= (method)">#[]=</a>, <a href="Model.html#accessible_attributes-class_method" title="BigRecord::Model.accessible_attributes (method)">accessible_attributes</a>, <a href="Model.html#all_attributes_loaded%3D-instance_method" title="BigRecord::Model#all_attributes_loaded= (method)">#all_attributes_loaded=</a>, <a href="Model.html#all_attributes_loaded%3F-instance_method" title="BigRecord::Model#all_attributes_loaded? (method)">#all_attributes_loaded?</a>, <a href="Model.html#attr_accessible-class_method" title="BigRecord::Model.attr_accessible (method)">attr_accessible</a>, <a href="Model.html#attr_create_accessible-class_method" title="BigRecord::Model.attr_create_accessible (method)">attr_create_accessible</a>, <a href="Model.html#attr_protected-class_method" title="BigRecord::Model.attr_protected (method)">attr_protected</a>, <a href="Model.html#attr_readonly-class_method" title="BigRecord::Model.attr_readonly (method)">attr_readonly</a>, <a href="Model.html#attribute_for_inspect-instance_method" title="BigRecord::Model#attribute_for_inspect (method)">#attribute_for_inspect</a>, <a href="Model.html#attribute_names-instance_method" title="BigRecord::Model#attribute_names (method)">#attribute_names</a>, <a href="Model.html#attribute_present%3F-instance_method" title="BigRecord::Model#attribute_present? (method)">#attribute_present?</a>, <a href="Model.html#attributes-instance_method" title="BigRecord::Model#attributes (method)">#attributes</a>, <a href="Model.html#attributes%3D-instance_method" title="BigRecord::Model#attributes= (method)">#attributes=</a>, <a href="Model.html#benchmark-class_method" title="BigRecord::Model.benchmark (method)">benchmark</a>, <a href="Model.html#column-class_method" title="BigRecord::Model.column (method)">column</a>, <a href="Model.html#column_for_attribute-instance_method" title="BigRecord::Model#column_for_attribute (method)">#column_for_attribute</a>, <a href="Model.html#column_methods_hash-class_method" title="BigRecord::Model.column_methods_hash (method)">column_methods_hash</a>, <a href="Model.html#column_names-class_method" title="BigRecord::Model.column_names (method)">column_names</a>, <a href="Model.html#columns-class_method" title="BigRecord::Model.columns (method)">columns</a>, <a href="Model.html#columns_hash-class_method" title="BigRecord::Model.columns_hash (method)">columns_hash</a>, <a href="Model.html#content_columns-class_method" title="BigRecord::Model.content_columns (method)">content_columns</a>, <a href="Model.html#create_accessible_attributes-class_method" title="BigRecord::Model.create_accessible_attributes (method)">create_accessible_attributes</a>, <a href="Model.html#deserialize-instance_method" title="BigRecord::Model#deserialize (method)">#deserialize</a>, <a href="Model.html#eql%3F-instance_method" title="BigRecord::Model#eql? (method)">#eql?</a>, <a href="Model.html#freeze-instance_method" title="BigRecord::Model#freeze (method)">#freeze</a>, <a href="Model.html#frozen%3F-instance_method" title="BigRecord::Model#frozen? (method)">#frozen?</a>, <a href="Model.html#has_attribute%3F-instance_method" title="BigRecord::Model#has_attribute? (method)">#has_attribute?</a>, <a href="Model.html#hash-instance_method" title="BigRecord::Model#hash (method)">#hash</a>, <a href="Model.html#human_attribute_name-instance_method" title="BigRecord::Model#human_attribute_name (method)">#human_attribute_name</a>, <a href="Model.html#human_attribute_name-class_method" title="BigRecord::Model.human_attribute_name (method)">human_attribute_name</a>, <a href="Model.html#id-instance_method" title="BigRecord::Model#id (method)">#id</a>, <a href="Model.html#id%3D-instance_method" title="BigRecord::Model#id= (method)">#id=</a>, <a href="Model.html#inspect-instance_method" title="BigRecord::Model#inspect (method)">#inspect</a>, <a href="Model.html#instantiate-class_method" title="BigRecord::Model.instantiate (method)">instantiate</a>, <a href="Model.html#preinitialize-instance_method" title="BigRecord::Model#preinitialize (method)">#preinitialize</a>, <a href="Model.html#protected_attributes-class_method" title="BigRecord::Model.protected_attributes (method)">protected_attributes</a>, <a href="Model.html#quote_value-class_method" title="BigRecord::Model.quote_value (method)">quote_value</a>, <a href="Model.html#quoted_id-instance_method" title="BigRecord::Model#quoted_id (method)">#quoted_id</a>, <a href="Model.html#read_methods-class_method" title="BigRecord::Model.read_methods (method)">read_methods</a>, <a href="Model.html#readonly%21-instance_method" title="BigRecord::Model#readonly! (method)">#readonly!</a>, <a href="Model.html#readonly%3F-instance_method" title="BigRecord::Model#readonly? (method)">#readonly?</a>, <a href="Model.html#readonly_attributes-class_method" title="BigRecord::Model.readonly_attributes (method)">readonly_attributes</a>, <a href="Model.html#reload-instance_method" title="BigRecord::Model#reload (method)">#reload</a>, <a href="Model.html#reset_subclasses-class_method" title="BigRecord::Model.reset_subclasses (method)">reset_subclasses</a>, <a href="Model.html#respond_to%3F-instance_method" title="BigRecord::Model#respond_to? (method)">#respond_to?</a>, <a href="Model.html#safe_attributes%3D-instance_method" title="BigRecord::Model#safe_attributes= (method)">#safe_attributes=</a>, <a href="Model.html#silence-class_method" title="BigRecord::Model.silence (method)">silence</a>, <a href="Model.html#store_primary_key%3F-class_method" title="BigRecord::Model.store_primary_key? (method)">store_primary_key?</a>, <a href="Model.html#to_s-instance_method" title="BigRecord::Model#to_s (method)">#to_s</a>, <a href="Model.html#undecorated_table_name-class_method" title="BigRecord::Model.undecorated_table_name (method)">undecorated_table_name</a></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><a href="" title="BigRecord::Base (class)">Base</a></tt>) <strong>initialize</strong>(attrs = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
New objects can be instantiated as either empty (pass no construction
parameter) or pre-set with attributes but not yet saved (pass a hash with
key names matching the associated table column names). In both instances,
valid attribute keys are determined by the column names of the associated
table &#8212; hence you can&#8217;t have attributes that aren&#8217;t part
of the table columns.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


18
19
20
21
22</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 18</span>

<span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='attrs identifier id'>attrs</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='@new_record ivar id'>@new_record</span> <span class='assign token'>=</span> <span class='true true kw'>true</span>
  <span class='super super kw'>super</span>
  <span class='attrs identifier id'>attrs</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span><span class='dot token'>.</span><span class='each identifier id'>each</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='k identifier id'>k</span><span class='bitor op'>|</span> <span class='set_loaded identifier id'>set_loaded</span><span class='lparen token'>(</span><span class='k identifier id'>k</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span> <span class='if if_mod kw'>if</span> <span class='attrs identifier id'>attrs</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>
<div id="method_missing_details" class="method_details_list">
  <h2>Dynamic Method Handling</h2>
  <p class="notice super">
    This class handles dynamic methods through the <tt>method_missing</tt> method
    
      in the class <a href="Model.html#method_missing-instance_method" title="BigRecord::Model#method_missing (method)">BigRecord::Model</a>
    
  </p>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="modified_attributes=-instance_method"></span>
      <span id="modified_attributes-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="modified_attributes-instance_method">
  
    - (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>modified_attributes</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute modified_attributes
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


5
6
7</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 5</span>

<span class='def def kw'>def</span> <span class='modified_attributes identifier id'>modified_attributes</span>
  <span class='@modified_attributes ivar id'>@modified_attributes</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="active_connection_name-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>active_connection_name</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


54
55
56
57
58
59
60
61
62
63</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/connection_adapters/abstract/connection_specification.rb', line 54</span>

<span class='def def kw'>def</span> <span class='active_connection_name identifier id'>active_connection_name</span> 
  <span class='@active_connection_name ivar id'>@active_connection_name</span> <span class='opasgn op'>||=</span>
     <span class='if if kw'>if</span> <span class='active_connections identifier id'>active_connections</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='@@defined_connections ivar id'>@@defined_connections</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span>
       <span class='name identifier id'>name</span>
     <span class='elsif elsif kw'>elsif</span> <span class='self self kw'>self</span> <span class='eq op'>==</span> <span class='BigRecord constant id'>BigRecord</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
       <span class='nil nil kw'>nil</span>
     <span class='else else kw'>else</span>
       <span class='superclass identifier id'>superclass</span><span class='dot token'>.</span><span class='active_connection_name identifier id'>active_connection_name</span>
     <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="allow_concurrency=-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>allow_concurrency=</strong>(threaded) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
set concurrency support flag (not thread safe, like most of the methods in
this file)
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


41
42
43
44
45
46
47
48
49
50
51
52</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/connection_adapters/abstract/connection_specification.rb', line 41</span>

<span class='def def kw'>def</span> <span class='allow_concurrency= identifier id'>allow_concurrency=</span><span class='lparen token'>(</span><span class='threaded identifier id'>threaded</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='debug identifier id'>debug</span> <span class='dstring node'>&quot;allow_concurrency=#{threaded}&quot;</span> <span class='if if_mod kw'>if</span> <span class='logger identifier id'>logger</span>
  <span class='return return kw'>return</span> <span class='if if_mod kw'>if</span> <span class='@@allow_concurrency ivar id'>@@allow_concurrency</span> <span class='eq op'>==</span> <span class='threaded identifier id'>threaded</span>
  <span class='clear_all_cached_connections! fid id'>clear_all_cached_connections!</span>
  <span class='@@allow_concurrency ivar id'>@@allow_concurrency</span> <span class='assign token'>=</span> <span class='threaded identifier id'>threaded</span>
  <span class='method_prefix identifier id'>method_prefix</span> <span class='assign token'>=</span> <span class='threaded identifier id'>threaded</span> <span class='integer val'>? </span><span class='string val'>&quot;thread_safe&quot;</span> <span class='colon op'>:</span> <span class='string val'>&quot;single_threaded&quot;</span>
  <span class='sing identifier id'>sing</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='class class kw'>class</span> <span class='lshft op'>&lt;&lt;</span> <span class='self self kw'>self</span><span class='semicolon token'>;</span> <span class='self self kw'>self</span><span class='semicolon token'>;</span> <span class='end end kw'>end</span><span class='rparen token'>)</span>
  <span class='lbrack token'>[</span><span class='symbol val'>:active_connections</span><span class='comma token'>,</span> <span class='symbol val'>:scoped_methods</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='method identifier id'>method</span><span class='bitor op'>|</span>
    <span class='sing identifier id'>sing</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='symbol val'>:alias_method</span><span class='comma token'>,</span> <span class='method identifier id'>method</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{method_prefix}_#{method}&quot;</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='log_connections identifier id'>log_connections</span> <span class='if if_mod kw'>if</span> <span class='logger identifier id'>logger</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="base_class-class_method">
  
    + (<tt>Class</tt>) <strong>base_class</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
The base class which inherits BigRecord::Base directly.
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Class</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>
The base class which inherits BigRecord::Base directly.
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


413
414
415</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 413</span>

<span class='def def kw'>def</span> <span class='base_class identifier id'>base_class</span>
  <span class='lparen token'>(</span><span class='superclass identifier id'>superclass</span> <span class='eq op'>==</span> <span class='BigRecord constant id'>BigRecord</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='self self kw'>self</span> <span class='colon op'>:</span> <span class='superclass identifier id'>superclass</span><span class='dot token'>.</span><span class='base_class identifier id'>base_class</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="cassandra_connection-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>cassandra_connection</strong>(config) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


3
4
5
6
7
8
9
10
11
12
13
14
15</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/connection_adapters/cassandra_adapter.rb', line 3</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='cassandra_connection identifier id'>cassandra_connection</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span> <span class='comment val'># :nodoc:</span>
  <span class='begin begin kw'>begin</span>
    <span class='require identifier id'>require</span> <span class='string val'>'cassandra'</span>
  <span class='rescue rescue kw'>rescue</span> <span class='LoadError constant id'>LoadError</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='e identifier id'>e</span>
    <span class='puts identifier id'>puts</span> <span class='string val'>&quot;[BigRecord] The 'cassandra' gem is needed for CassandraAdapter. Install it with: gem install cassandra&quot;</span>
    <span class='raise identifier id'>raise</span> <span class='e identifier id'>e</span>
  <span class='end end kw'>end</span>

  <span class='config identifier id'>config</span> <span class='assign token'>=</span> <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='symbolize_keys identifier id'>symbolize_keys</span>
  
  <span class='client identifier id'>client</span> <span class='assign token'>=</span> <span class='Cassandra constant id'>Cassandra</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='lbrack token'>[</span><span class='symbol val'>:keyspace</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='config identifier id'>config</span><span class='lbrack token'>[</span><span class='symbol val'>:servers</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='ConnectionAdapters constant id'>ConnectionAdapters</span><span class='colon2 op'>::</span><span class='CassandraAdapter constant id'>CassandraAdapter</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='client identifier id'>client</span><span class='comma token'>,</span> <span class='logger identifier id'>logger</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='config identifier id'>config</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="clear_active_connection_name-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>clear_active_connection_name</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


65
66
67
68</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/connection_adapters/abstract/connection_specification.rb', line 65</span>

<span class='def def kw'>def</span> <span class='clear_active_connection_name identifier id'>clear_active_connection_name</span> 
  <span class='@active_connection_name ivar id'>@active_connection_name</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>
  <span class='subclasses identifier id'>subclasses</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='klass identifier id'>klass</span><span class='bitor op'>|</span> <span class='klass identifier id'>klass</span><span class='dot token'>.</span><span class='clear_active_connection_name identifier id'>clear_active_connection_name</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="clear_active_connections!-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>clear_active_connections!</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Clears the cache which maps classes to connections.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


84
85
86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/connection_adapters/abstract/connection_specification.rb', line 84</span>

<span class='def def kw'>def</span> <span class='clear_active_connections! fid id'>clear_active_connections!</span>
  <span class='clear_cache! fid id'>clear_cache!</span><span class='lparen token'>(</span><span class='@@active_connections ivar id'>@@active_connections</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='conn identifier id'>conn</span><span class='bitor op'>|</span>
    <span class='conn identifier id'>conn</span><span class='dot token'>.</span><span class='disconnect! fid id'>disconnect!</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="clear_reloadable_connections!-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>clear_reloadable_connections!</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Clears the cache which maps classes
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


91
92
93
94
95
96
97
98</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/connection_adapters/abstract/connection_specification.rb', line 91</span>

<span class='def def kw'>def</span> <span class='clear_reloadable_connections! fid id'>clear_reloadable_connections!</span>
  <span class='@@active_connections ivar id'>@@active_connections</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='conn identifier id'>conn</span><span class='bitor op'>|</span>
    <span class='if if kw'>if</span> <span class='conn identifier id'>conn</span><span class='dot token'>.</span><span class='requires_reloading? fid id'>requires_reloading?</span>
      <span class='conn identifier id'>conn</span><span class='dot token'>.</span><span class='disconnect! fid id'>disconnect!</span>
      <span class='@@active_connections ivar id'>@@active_connections</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="columns_to_find-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>columns_to_find</strong>(options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Return the list of fully qualified column names, i.e.
[&quot;family:qualifier&quot;].
</p>
<p>
Returns the column names based on the options argument in order of
:columns,then :view, i.e. disregards :view if :columns is defined.
</p>


  </div>
</div>
<div class="tags">
  
  
    
    
    <h3>Options Hash (<tt>options</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>Array&lt;String, Symbol&gt;</tt>)</span>
          <span class="name">:columns</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
List of fully qualified column names or column aliases.
</p>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>String</tt>, <tt>Symbol</tt>)</span>
          <span class="name">:view</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><p>
The name of the view as defined with <tt><a href="#view-class_method" title="BigRecord::Base.view (method)">view</a></tt>.
</p>
</div>
        </tr>
      
    </ul>
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 484</span>

<span class='def def kw'>def</span> <span class='columns_to_find identifier id'>columns_to_find</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='c identifier id'>c</span> <span class='assign token'>=</span>
    <span class='if if kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:columns</span><span class='rbrack token'>]</span>
      <span class='column_list identifier id'>column_list</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
      <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:columns</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='column_name identifier id'>column_name</span><span class='bitor op'>|</span>
        <span class='comment val'># If the column name provided is a full name, i.e. includes column family and qualifier,</span>
        <span class='comment val'># then add it to the list.</span>
        <span class='if if kw'>if</span> <span class='column_name identifier id'>column_name</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='match op'>=~</span> <span class='regexp val'>/:/</span>
          <span class='column_list identifier id'>column_list</span> <span class='lshft op'>&lt;&lt;</span> <span class='column_name identifier id'>column_name</span>

        <span class='comment val'># Otherwise, it's probably an alias and we need to check that.</span>
        <span class='else else kw'>else</span>
          <span class='columns identifier id'>columns</span><span class='dot token'>.</span><span class='select identifier id'>select</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='column identifier id'>column</span><span class='bitor op'>|</span> <span class='column_list identifier id'>column_list</span> <span class='lshft op'>&lt;&lt;</span> <span class='column identifier id'>column</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='if if_mod kw'>if</span> <span class='column identifier id'>column</span><span class='dot token'>.</span><span class='alias identifier id'>alias</span> <span class='eq op'>==</span> <span class='column_name identifier id'>column_name</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrace token'>}</span>
        <span class='end end kw'>end</span>
      <span class='end end kw'>end</span>
      <span class='column_list identifier id'>column_list</span>
    <span class='elsif elsif kw'>elsif</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:view</span><span class='rbrack token'>]</span>
      <span class='raise identifier id'>raise</span> <span class='ArgumentError constant id'>ArgumentError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Unknown view: #{options[:view]}&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='views_hash identifier id'>views_hash</span><span class='lbrack token'>[</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:view</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span>
      <span class='if if kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:view</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='symbol val'>:all</span>
        <span class='lbrack token'>[</span><span class='dstring node'>&quot;#{default_family}:&quot;</span><span class='rbrack token'>]</span>
      <span class='else else kw'>else</span>
        <span class='views_hash identifier id'>views_hash</span><span class='lbrack token'>[</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:view</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='column_names identifier id'>column_names</span>
      <span class='end end kw'>end</span>
    <span class='elsif elsif kw'>elsif</span> <span class='views_hash identifier id'>views_hash</span><span class='lbrack token'>[</span><span class='symbol val'>:default</span><span class='rbrack token'>]</span>
      <span class='views_hash identifier id'>views_hash</span><span class='lbrack token'>[</span><span class='symbol val'>:default</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='column_names identifier id'>column_names</span>
    <span class='else else kw'>else</span>
      <span class='lbrack token'>[</span><span class='dstring node'>&quot;#{default_family}:&quot;</span><span class='rbrack token'>]</span>
    <span class='end end kw'>end</span>
  <span class='c identifier id'>c</span> <span class='opasgn op'>+=</span> <span class='lbrack token'>[</span><span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:include</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span> <span class='if if_mod kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:include</span><span class='rbrack token'>]</span>
  <span class='c identifier id'>c</span><span class='dot token'>.</span><span class='flatten identifier id'>flatten</span><span class='dot token'>.</span><span class='reject identifier id'>reject</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='x identifier id'>x</span><span class='bitor op'>|</span> <span class='x identifier id'>x</span> <span class='eq op'>==</span> <span class='string val'>&quot;id&quot;</span><span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="connected?-class_method">
  
    + (<tt>Boolean</tt>) <strong>connected?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns true if a connection that&#8217;s accessible to this class have
already been opened.
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


239
240
241</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/connection_adapters/abstract/connection_specification.rb', line 239</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='connected? fid id'>connected?</span>
  <span class='active_connections identifier id'>active_connections</span><span class='lbrack token'>[</span><span class='active_connection_name identifier id'>active_connection_name</span><span class='rbrack token'>]</span> <span class='question op'>?</span> <span class='true true kw'>true</span> <span class='colon op'>:</span> <span class='false false kw'>false</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="connection-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>connection</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the connection currently associated with the class. This can also
be used to &quot;borrow&quot; the connection to do database work unrelated
to any of the specific Active Records.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


73
74
75
76
77
78
79
80
81</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/connection_adapters/abstract/connection_specification.rb', line 73</span>

<span class='def def kw'>def</span> <span class='connection identifier id'>connection</span>
  <span class='if if kw'>if</span> <span class='@active_connection_name ivar id'>@active_connection_name</span> <span class='andop op'>&amp;&amp;</span> <span class='lparen token'>(</span><span class='conn identifier id'>conn</span> <span class='assign token'>=</span> <span class='active_connections identifier id'>active_connections</span><span class='lbrack token'>[</span><span class='@active_connection_name ivar id'>@active_connection_name</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
    <span class='conn identifier id'>conn</span>
  <span class='else else kw'>else</span>
    <span class='comment val'># retrieve_connection sets the cache key.</span>
    <span class='conn identifier id'>conn</span> <span class='assign token'>=</span> <span class='retrieve_connection identifier id'>retrieve_connection</span>
    <span class='active_connections identifier id'>active_connections</span><span class='lbrack token'>[</span><span class='@active_connection_name ivar id'>@active_connection_name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='conn identifier id'>conn</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="connection=-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>connection=</strong>(spec) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Set the connection for the class.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


257
258
259
260
261
262
263
264
265
266
267
268</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/connection_adapters/abstract/connection_specification.rb', line 257</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='connection identifier id'>connection</span><span class='assign token'>=</span><span class='lparen token'>(</span><span class='spec identifier id'>spec</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='if if kw'>if</span> <span class='spec identifier id'>spec</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='BigRecord constant id'>BigRecord</span><span class='colon2 op'>::</span><span class='ConnectionAdapters constant id'>ConnectionAdapters</span><span class='colon2 op'>::</span><span class='AbstractAdapter constant id'>AbstractAdapter</span><span class='rparen token'>)</span>
    <span class='active_connections identifier id'>active_connections</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='spec identifier id'>spec</span>
  <span class='elsif elsif kw'>elsif</span> <span class='spec identifier id'>spec</span><span class='dot token'>.</span><span class='kind_of? fid id'>kind_of?</span><span class='lparen token'>(</span><span class='ConnectionSpecification constant id'>ConnectionSpecification</span><span class='rparen token'>)</span>
    <span class='config identifier id'>config</span> <span class='assign token'>=</span> <span class='spec identifier id'>spec</span><span class='dot token'>.</span><span class='config identifier id'>config</span><span class='dot token'>.</span><span class='reverse_merge identifier id'>reverse_merge</span><span class='lparen token'>(</span><span class='symbol val'>:allow_concurrency</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='@@allow_concurrency ivar id'>@@allow_concurrency</span><span class='rparen token'>)</span>
    <span class='self self kw'>self</span><span class='dot token'>.</span><span class='connection identifier id'>connection</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='spec identifier id'>spec</span><span class='dot token'>.</span><span class='adapter_method identifier id'>adapter_method</span><span class='comma token'>,</span> <span class='config identifier id'>config</span><span class='rparen token'>)</span>
  <span class='elsif elsif kw'>elsif</span> <span class='spec identifier id'>spec</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
    <span class='raise identifier id'>raise</span> <span class='ConnectionNotEstablished constant id'>ConnectionNotEstablished</span>
  <span class='else else kw'>else</span>
    <span class='establish_connection identifier id'>establish_connection</span> <span class='spec identifier id'>spec</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="create-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>create</strong>(attrs = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Creates an object, instantly saves it as a record (if the validation
permits it), and returns it. If the save fails under validations, the
unsaved object is still returned.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


310
311
312
313
314
315
316
317
318</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 310</span>

<span class='def def kw'>def</span> <span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='attrs identifier id'>attrs</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='attrs identifier id'>attrs</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Array constant id'>Array</span><span class='rparen token'>)</span>
    <span class='attrs identifier id'>attrs</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='attr identifier id'>attr</span><span class='bitor op'>|</span> <span class='create identifier id'>create</span><span class='lparen token'>(</span><span class='attr identifier id'>attr</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='else else kw'>else</span>
    <span class='object identifier id'>object</span> <span class='assign token'>=</span> <span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='attrs identifier id'>attrs</span><span class='rparen token'>)</span>
    <span class='object identifier id'>object</span><span class='dot token'>.</span><span class='save identifier id'>save</span>
    <span class='object identifier id'>object</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="default_column_prefix-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>default_column_prefix</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


468
469
470</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 468</span>

<span class='def def kw'>def</span> <span class='default_column_prefix identifier id'>default_column_prefix</span>
  <span class='dstring node'>&quot;#{default_family}:&quot;</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="default_columns-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>default_columns</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Default columns to create with the model, such as primary key.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


464
465
466</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 464</span>

<span class='def def kw'>def</span> <span class='default_columns identifier id'>default_columns</span>
  <span class='lbrace token'>{</span><span class='primary_key identifier id'>primary_key</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='ConnectionAdapters constant id'>ConnectionAdapters</span><span class='colon2 op'>::</span><span class='Column constant id'>Column</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='primary_key identifier id'>primary_key</span><span class='comma token'>,</span> <span class='string val'>'string'</span><span class='rparen token'>)</span><span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="default_family-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>default_family</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Get the default column family used to store attributes that have no column
family set explicitly.
</p>
<p>
Defaults to &quot;attribute&quot;
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


400
401
402</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 400</span>

<span class='def def kw'>def</span> <span class='default_family identifier id'>default_family</span>
  <span class='@default_family ivar id'>@default_family</span> <span class='opasgn op'>||=</span> <span class='string val'>&quot;attribute&quot;</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="default_views-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>default_views</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Return the hash of default views which consist of all columns and the
:default named views.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


473
474
475</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 473</span>

<span class='def def kw'>def</span> <span class='default_views identifier id'>default_views</span>
  <span class='lbrace token'>{</span><span class='symbol val'>:all=</span><span class='gt op'>&gt;</span><span class='ConnectionAdapters constant id'>ConnectionAdapters</span><span class='colon2 op'>::</span><span class='View constant id'>View</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'all'</span><span class='comma token'>,</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span><span class='comma token'>,</span> <span class='symbol val'>:default=</span><span class='gt op'>&gt;</span><span class='ConnectionAdapters constant id'>ConnectionAdapters</span><span class='colon2 op'>::</span><span class='View constant id'>View</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'default'</span><span class='comma token'>,</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span><span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="delete-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>delete</strong>(id) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Deletes the record with the given <tt>id</tt> without instantiating an
object first. If an array of ids is provided, all of them are deleted.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


345
346
347
348
349
350
351</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 345</span>

<span class='def def kw'>def</span> <span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='id identifier id'>id</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='id identifier id'>id</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Array constant id'>Array</span><span class='rparen token'>)</span>
    <span class='id identifier id'>id</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='a identifier id'>a</span><span class='bitor op'>|</span> <span class='connection identifier id'>connection</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='table_name identifier id'>table_name</span><span class='comma token'>,</span> <span class='a identifier id'>a</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='else else kw'>else</span>
    <span class='connection identifier id'>connection</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='table_name identifier id'>table_name</span><span class='comma token'>,</span> <span class='id identifier id'>id</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="delete_all-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>delete_all</strong>(conditions = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    
  <p class="note todo">
    <strong>TODO:</strong> 
    <div class='inline'><p>
take into consideration the conditions
</p>
</div>
  </p>

<p>
Deletes all the records that match the <tt>condition</tt> without
instantiating the objects first (and hence not calling the destroy method).
Example:
</p>
<pre class="code">
  <span class='Post constant id'>Post</span><span class='dot token'>.</span><span class='delete_all identifier id'>delete_all</span> <span class='string val'>&quot;person_id = 5 AND (category = 'Something' OR category = 'Else')&quot;</span>
</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


378
379
380
381
382</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 378</span>

<span class='def def kw'>def</span> <span class='delete_all identifier id'>delete_all</span><span class='lparen token'>(</span><span class='conditions identifier id'>conditions</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='connection identifier id'>connection</span><span class='dot token'>.</span><span class='get_consecutive_rows identifier id'>get_consecutive_rows</span><span class='lparen token'>(</span><span class='table_name identifier id'>table_name</span><span class='comma token'>,</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='nil nil kw'>nil</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='dstring node'>&quot;#{default_family}:&quot;</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='row identifier id'>row</span><span class='bitor op'>|</span>
    <span class='connection identifier id'>connection</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='table_name identifier id'>table_name</span><span class='comma token'>,</span> <span class='row identifier id'>row</span><span class='lbrack token'>[</span><span class='string val'>&quot;id&quot;</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="destroy-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>destroy</strong>(id) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Destroys the record with the given <tt>id</tt> by instantiating the object
and calling #destroy (all the callbacks are the triggered). If an array of
ids is provided, all of them are destroyed.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


355
356
357</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 355</span>

<span class='def def kw'>def</span> <span class='destroy identifier id'>destroy</span><span class='lparen token'>(</span><span class='id identifier id'>id</span><span class='rparen token'>)</span>
  <span class='id identifier id'>id</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Array constant id'>Array</span><span class='rparen token'>)</span> <span class='question op'>?</span> <span class='id identifier id'>id</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='a identifier id'>a</span><span class='bitor op'>|</span> <span class='destroy identifier id'>destroy</span><span class='lparen token'>(</span><span class='a identifier id'>a</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span> <span class='colon op'>:</span> <span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='id identifier id'>id</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='destroy identifier id'>destroy</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="destroy_all-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>destroy_all</strong>(conditions = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Destroys the objects for all the records that match the <tt>condition</tt>
by instantiating each object and calling the destroy method. Example:
</p>
<pre class="code">
  <span class='Person constant id'>Person</span><span class='dot token'>.</span><span class='destroy_all identifier id'>destroy_all</span> <span class='string val'>&quot;last_login &lt; '2004-04-04'&quot;</span>
</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


369
370
371</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 369</span>

<span class='def def kw'>def</span> <span class='destroy_all identifier id'>destroy_all</span><span class='lparen token'>(</span><span class='conditions identifier id'>conditions</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='symbol val'>:all</span><span class='comma token'>,</span> <span class='symbol val'>:conditions</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='conditions identifier id'>conditions</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='object identifier id'>object</span><span class='bitor op'>|</span> <span class='object identifier id'>object</span><span class='dot token'>.</span><span class='destroy identifier id'>destroy</span> <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="establish_connection-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>establish_connection</strong>(spec = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Establishes the connection to the database. Accepts a hash as input where
the :adapter key must be specified with the name of a database adapter (in
lower-case) example for regular databases (MySQL, Postgresql, etc):
</p>
<pre class="code">
  <span class='ActiveRecord constant id'>ActiveRecord</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span><span class='dot token'>.</span><span class='establish_connection identifier id'>establish_connection</span><span class='lparen token'>(</span>
    <span class='symbol val'>:adapter</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;mysql&quot;</span><span class='comma token'>,</span>
    <span class='symbol val'>:host</span>     <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;localhost&quot;</span><span class='comma token'>,</span>
    <span class='symbol val'>:username</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;myuser&quot;</span><span class='comma token'>,</span>
    <span class='symbol val'>:password</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;mypass&quot;</span><span class='comma token'>,</span>
    <span class='symbol val'>:database</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;somedatabase&quot;</span>
  <span class='rparen token'>)</span>
</pre>
<p>
Example for SQLite database:
</p>
<pre class="code">
  <span class='ActiveRecord constant id'>ActiveRecord</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span><span class='dot token'>.</span><span class='establish_connection identifier id'>establish_connection</span><span class='lparen token'>(</span>
    <span class='symbol val'>:adapter</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;sqlite&quot;</span><span class='comma token'>,</span>
    <span class='symbol val'>:database</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;path/to/dbfile&quot;</span>
  <span class='rparen token'>)</span>
</pre>
<p>
Also accepts keys as strings (for parsing from yaml for example):
</p>
<pre class="code">
  <span class='ActiveRecord constant id'>ActiveRecord</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span><span class='dot token'>.</span><span class='establish_connection identifier id'>establish_connection</span><span class='lparen token'>(</span>
    <span class='string val'>&quot;adapter&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;sqlite&quot;</span><span class='comma token'>,</span>
    <span class='string val'>&quot;database&quot;</span>  <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;path/to/dbfile&quot;</span>
  <span class='rparen token'>)</span>
</pre>
<p>
The exceptions AdapterNotSpecified, AdapterNotFound and ArgumentError may
be returned on an error.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/connection_adapters/abstract/connection_specification.rb', line 191</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='establish_connection identifier id'>establish_connection</span><span class='lparen token'>(</span><span class='spec identifier id'>spec</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='case case kw'>case</span> <span class='spec identifier id'>spec</span>
    <span class='when when kw'>when</span> <span class='nil nil kw'>nil</span>
      <span class='raise identifier id'>raise</span> <span class='AdapterNotSpecified constant id'>AdapterNotSpecified</span> <span class='unless unless_mod kw'>unless</span> <span class='defined? defined kw'>defined?</span> <span class='RAILS_ENV constant id'>RAILS_ENV</span>
      <span class='establish_connection identifier id'>establish_connection</span><span class='lparen token'>(</span><span class='RAILS_ENV constant id'>RAILS_ENV</span><span class='rparen token'>)</span>
    <span class='when when kw'>when</span> <span class='ConnectionSpecification constant id'>ConnectionSpecification</span>
      <span class='clear_active_connection_name identifier id'>clear_active_connection_name</span>
      <span class='@active_connection_name ivar id'>@active_connection_name</span> <span class='assign token'>=</span> <span class='name identifier id'>name</span>
      <span class='@@defined_connections ivar id'>@@defined_connections</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='spec identifier id'>spec</span>
    <span class='when when kw'>when</span> <span class='Symbol constant id'>Symbol</span><span class='comma token'>,</span> <span class='String constant id'>String</span>
      <span class='if if kw'>if</span> <span class='configuration identifier id'>configuration</span> <span class='assign token'>=</span> <span class='configurations identifier id'>configurations</span><span class='lbrack token'>[</span><span class='spec identifier id'>spec</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span><span class='rbrack token'>]</span>
        <span class='establish_connection identifier id'>establish_connection</span><span class='lparen token'>(</span><span class='configuration identifier id'>configuration</span><span class='rparen token'>)</span>
      <span class='else else kw'>else</span>
        <span class='raise identifier id'>raise</span> <span class='AdapterNotSpecified constant id'>AdapterNotSpecified</span><span class='comma token'>,</span> <span class='dstring node'>&quot;#{spec} database is not configured&quot;</span>
      <span class='end end kw'>end</span>
    <span class='else else kw'>else</span>
      <span class='spec identifier id'>spec</span> <span class='assign token'>=</span> <span class='spec identifier id'>spec</span><span class='dot token'>.</span><span class='symbolize_keys identifier id'>symbolize_keys</span>
      <span class='unless unless kw'>unless</span> <span class='spec identifier id'>spec</span><span class='dot token'>.</span><span class='key? fid id'>key?</span><span class='lparen token'>(</span><span class='symbol val'>:adapter</span><span class='rparen token'>)</span> <span class='then then kw'>then</span> <span class='raise identifier id'>raise</span> <span class='AdapterNotSpecified constant id'>AdapterNotSpecified</span><span class='comma token'>,</span> <span class='string val'>&quot;database configuration does not specify adapter&quot;</span> <span class='end end kw'>end</span>
      <span class='adapter_method identifier id'>adapter_method</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;#{spec[:adapter]}_connection&quot;</span>
      <span class='unless unless kw'>unless</span> <span class='respond_to? fid id'>respond_to?</span><span class='lparen token'>(</span><span class='adapter_method identifier id'>adapter_method</span><span class='rparen token'>)</span> <span class='then then kw'>then</span> <span class='raise identifier id'>raise</span> <span class='AdapterNotFound constant id'>AdapterNotFound</span><span class='comma token'>,</span> <span class='dstring node'>&quot;database configuration specifies nonexistent #{spec[:adapter]} adapter&quot;</span> <span class='end end kw'>end</span>
      <span class='remove_connection identifier id'>remove_connection</span>
      <span class='establish_connection identifier id'>establish_connection</span><span class='lparen token'>(</span><span class='ConnectionSpecification constant id'>ConnectionSpecification</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='spec identifier id'>spec</span><span class='comma token'>,</span> <span class='adapter_method identifier id'>adapter_method</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="exists?-class_method">
  
    + (<tt>Boolean</tt>) <strong>exists?</strong>(id) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns true if the given <tt>id</tt> represents the primary key of a
record in the database, false otherwise.
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


302
303
304
305
306</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 302</span>

<span class='def def kw'>def</span> <span class='exists? fid id'>exists?</span><span class='lparen token'>(</span><span class='id identifier id'>id</span><span class='rparen token'>)</span>
  <span class='notop op'>!</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='id identifier id'>id</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='nil? fid id'>nil?</span>
<span class='rescue rescue kw'>rescue</span> <span class='BigRecord constant id'>BigRecord</span><span class='colon2 op'>::</span><span class='BigRecordError constant id'>BigRecordError</span>
  <span class='false false kw'>false</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="families-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>families</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Return the list of families for this class
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


239
240
241</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 239</span>

<span class='def def kw'>def</span> <span class='families identifier id'>families</span>
  <span class='columns identifier id'>columns</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:family</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='uniq identifier id'>uniq</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="find-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>find</strong>(*args) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 283</span>

<span class='def def kw'>def</span> <span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='extract_options_from_args! fid id'>extract_options_from_args!</span><span class='lparen token'>(</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='validate_find_options identifier id'>validate_find_options</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>

  <span class='comment val'># set a default view</span>
  <span class='if if kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:view</span><span class='rbrack token'>]</span>
    <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:view</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:view</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span>
  <span class='else else kw'>else</span>
    <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:view</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='symbol val'>:default</span>
  <span class='end end kw'>end</span>

  <span class='case case kw'>case</span> <span class='args identifier id'>args</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
    <span class='when when kw'>when</span> <span class='symbol val'>:first</span> <span class='then then kw'>then</span> <span class='find_every identifier id'>find_every</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='lbrace token'>{</span><span class='symbol val'>:limit</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>1</span><span class='rbrace token'>}</span><span class='rparen token'>)</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='first identifier id'>first</span>
    <span class='when when kw'>when</span> <span class='symbol val'>:all</span>   <span class='then then kw'>then</span> <span class='find_every identifier id'>find_every</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='rparen token'>)</span>
    <span class='else else kw'>else</span>             <span class='find_from_ids identifier id'>find_from_ids</span><span class='lparen token'>(</span><span class='args identifier id'>args</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="hbase_connection-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>hbase_connection</strong>(config) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Establishes a connection to the database that&#8217;s used by all Active
Record objects.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/connection_adapters/hbase_adapter.rb', line 7</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='hbase_connection identifier id'>hbase_connection</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span>
  <span class='begin begin kw'>begin</span>
    <span class='require identifier id'>require</span> <span class='string val'>'big_record_driver'</span>
  <span class='rescue rescue kw'>rescue</span> <span class='LoadError constant id'>LoadError</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='e identifier id'>e</span>
    <span class='puts identifier id'>puts</span> <span class='string val'>&quot;[BigRecord] bigrecord-driver is needed for HbaseAdapter. Install it with: gem install bigrecord-driver&quot;</span>
    <span class='raise identifier id'>raise</span> <span class='e identifier id'>e</span>
  <span class='end end kw'>end</span>

  <span class='config identifier id'>config</span> <span class='assign token'>=</span> <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='symbolize_keys identifier id'>symbolize_keys</span>

  <span class='zookeeper_host identifier id'>zookeeper_host</span>          <span class='assign token'>=</span> <span class='config identifier id'>config</span><span class='lbrack token'>[</span><span class='symbol val'>:zookeeper_host</span><span class='rbrack token'>]</span>
  <span class='zookeeper_client_port identifier id'>zookeeper_client_port</span>   <span class='assign token'>=</span> <span class='config identifier id'>config</span><span class='lbrack token'>[</span><span class='symbol val'>:zookeeper_client_port</span><span class='rbrack token'>]</span>
  <span class='drb_host identifier id'>drb_host</span>                <span class='assign token'>=</span> <span class='config identifier id'>config</span><span class='lbrack token'>[</span><span class='symbol val'>:drb_host</span><span class='rbrack token'>]</span>
  <span class='drb_port identifier id'>drb_port</span>                <span class='assign token'>=</span> <span class='config identifier id'>config</span><span class='lbrack token'>[</span><span class='symbol val'>:drb_port</span><span class='rbrack token'>]</span>

  <span class='hbase identifier id'>hbase</span> <span class='assign token'>=</span> <span class='BigRecord constant id'>BigRecord</span><span class='colon2 op'>::</span><span class='Driver constant id'>Driver</span><span class='colon2 op'>::</span><span class='Client constant id'>Client</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span>

  <span class='ConnectionAdapters constant id'>ConnectionAdapters</span><span class='colon2 op'>::</span><span class='HbaseAdapter constant id'>HbaseAdapter</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='hbase identifier id'>hbase</span><span class='comma token'>,</span> <span class='logger identifier id'>logger</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='zookeeper_host identifier id'>zookeeper_host</span><span class='comma token'>,</span> <span class='zookeeper_client_port identifier id'>zookeeper_client_port</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='config identifier id'>config</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="hbase_rest_connection-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>hbase_rest_connection</strong>(config) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Establishes a connection to the database that&#8217;s used by all Active
Record objects.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


6
7
8
9
10
11
12
13
14
15
16
17
18
19</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/connection_adapters/hbase_rest_adapter.rb', line 6</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='hbase_rest_connection identifier id'>hbase_rest_connection</span><span class='lparen token'>(</span><span class='config identifier id'>config</span><span class='rparen token'>)</span> <span class='comment val'># :nodoc:</span>
  <span class='begin begin kw'>begin</span>
    <span class='require identifier id'>require</span> <span class='string val'>'stargate'</span>
  <span class='rescue rescue kw'>rescue</span> <span class='LoadError constant id'>LoadError</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='e identifier id'>e</span>
    <span class='puts identifier id'>puts</span> <span class='string val'>&quot;[BigRecord] hbase-stargate is needed for HbaseRestAdapter. Install it with: gem install hbase-stargate&quot;</span>
    <span class='raise identifier id'>raise</span> <span class='e identifier id'>e</span>
  <span class='end end kw'>end</span>

  <span class='config identifier id'>config</span> <span class='assign token'>=</span> <span class='config identifier id'>config</span><span class='dot token'>.</span><span class='symbolize_keys identifier id'>symbolize_keys</span>

  <span class='api_address identifier id'>api_address</span> <span class='assign token'>=</span> <span class='config identifier id'>config</span><span class='lbrack token'>[</span><span class='symbol val'>:api_address</span><span class='rbrack token'>]</span>
  <span class='hbase identifier id'>hbase</span> <span class='assign token'>=</span> <span class='Stargate constant id'>Stargate</span><span class='colon2 op'>::</span><span class='Client constant id'>Client</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='api_address identifier id'>api_address</span><span class='rparen token'>)</span>
  <span class='ConnectionAdapters constant id'>ConnectionAdapters</span><span class='colon2 op'>::</span><span class='HbaseRestAdapter constant id'>HbaseRestAdapter</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='hbase identifier id'>hbase</span><span class='comma token'>,</span> <span class='logger identifier id'>logger</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='config identifier id'>config</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="inherited-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>inherited</strong>(child) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


7
8
9
10
11
12</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 7</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='inherited identifier id'>inherited</span><span class='lparen token'>(</span><span class='child identifier id'>child</span><span class='rparen token'>)</span> <span class='comment val'>#:nodoc:</span>
  <span class='@@subclasses ivar id'>@@subclasses</span><span class='lbrack token'>[</span><span class='self self kw'>self</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='@@subclasses ivar id'>@@subclasses</span><span class='lbrack token'>[</span><span class='self self kw'>self</span><span class='rbrack token'>]</span> <span class='lshft op'>&lt;&lt;</span> <span class='child identifier id'>child</span>
  <span class='child identifier id'>child</span><span class='dot token'>.</span><span class='set_table_name identifier id'>set_table_name</span> <span class='child identifier id'>child</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='dot token'>.</span><span class='tableize identifier id'>tableize</span> <span class='if if_mod kw'>if</span> <span class='child identifier id'>child</span><span class='dot token'>.</span><span class='superclass identifier id'>superclass</span> <span class='eq op'>==</span> <span class='BigRecord constant id'>BigRecord</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span>
  <span class='super super kw'>super</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="log_connections-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>log_connections</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
connection state logging
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


271
272
273
274
275
276
277</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/connection_adapters/abstract/connection_specification.rb', line 271</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='log_connections identifier id'>log_connections</span> 
  <span class='if if kw'>if</span> <span class='logger identifier id'>logger</span>
    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='info identifier id'>info</span> <span class='dstring node'>&quot;Defined connections: #{@@defined_connections.inspect}&quot;</span>
    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='info identifier id'>info</span> <span class='dstring node'>&quot;Active connections: #{active_connections.inspect}&quot;</span>
    <span class='logger identifier id'>logger</span><span class='dot token'>.</span><span class='info identifier id'>info</span> <span class='dstring node'>&quot;Active connection name: #{@active_connection_name}&quot;</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="primary_key-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>primary_key</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Return the name of the primary key. Defaults to &quot;id&quot;.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


234
235
236</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 234</span>

<span class='def def kw'>def</span> <span class='primary_key identifier id'>primary_key</span>
  <span class='@primary_key ivar id'>@primary_key</span> <span class='opasgn op'>||=</span> <span class='string val'>&quot;id&quot;</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="remove_connection-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>remove_connection</strong>(klass = self) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Remove the connection for this class. This will close the active connection
and the defined connection (if they exist). The result can be used as
argument for establish_connection, for easy re-establishing of the
connection.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


247
248
249
250
251
252
253
254</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/connection_adapters/abstract/connection_specification.rb', line 247</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='remove_connection identifier id'>remove_connection</span><span class='lparen token'>(</span><span class='klass identifier id'>klass</span><span class='assign token'>=</span><span class='self self kw'>self</span><span class='rparen token'>)</span>
  <span class='spec identifier id'>spec</span> <span class='assign token'>=</span> <span class='@@defined_connections ivar id'>@@defined_connections</span><span class='lbrack token'>[</span><span class='klass identifier id'>klass</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span>
  <span class='konn identifier id'>konn</span> <span class='assign token'>=</span> <span class='active_connections identifier id'>active_connections</span><span class='lbrack token'>[</span><span class='klass identifier id'>klass</span><span class='dot token'>.</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span>
  <span class='@@defined_connections ivar id'>@@defined_connections</span><span class='dot token'>.</span><span class='delete_if identifier id'>delete_if</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='bitor op'>|</span> <span class='value identifier id'>value</span> <span class='eq op'>==</span> <span class='spec identifier id'>spec</span> <span class='rbrace token'>}</span>
  <span class='active_connections identifier id'>active_connections</span><span class='dot token'>.</span><span class='delete_if identifier id'>delete_if</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='key identifier id'>key</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='bitor op'>|</span> <span class='value identifier id'>value</span> <span class='eq op'>==</span> <span class='konn identifier id'>konn</span> <span class='rbrace token'>}</span>
  <span class='konn identifier id'>konn</span><span class='dot token'>.</span><span class='disconnect! fid id'>disconnect!</span> <span class='if if_mod kw'>if</span> <span class='konn identifier id'>konn</span>
  <span class='spec identifier id'>spec</span><span class='dot token'>.</span><span class='config identifier id'>config</span> <span class='if if_mod kw'>if</span> <span class='spec identifier id'>spec</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="retrieve_connection-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>retrieve_connection</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Locate the connection of the nearest super class. This can be an active or
defined connections: if it is the latter, it will be opened and set as the
active connection for the class it was defined for (not necessarily the
current class).
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/connection_adapters/abstract/connection_specification.rb', line 220</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='retrieve_connection identifier id'>retrieve_connection</span> 
  <span class='comment val'># Name is nil if establish_connection hasn't been called for</span>
  <span class='comment val'># some class along the inheritance chain up to AR::Base yet.</span>
  <span class='if if kw'>if</span> <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='active_connection_name identifier id'>active_connection_name</span>
    <span class='if if kw'>if</span> <span class='conn identifier id'>conn</span> <span class='assign token'>=</span> <span class='active_connections identifier id'>active_connections</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span>
      <span class='comment val'># Verify the connection.</span>
      <span class='conn identifier id'>conn</span><span class='dot token'>.</span><span class='verify! fid id'>verify!</span><span class='lparen token'>(</span><span class='@@verification_timeout ivar id'>@@verification_timeout</span><span class='rparen token'>)</span>
    <span class='elsif elsif kw'>elsif</span> <span class='spec identifier id'>spec</span> <span class='assign token'>=</span> <span class='@@defined_connections ivar id'>@@defined_connections</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span>
      <span class='comment val'># Activate this connection specification.</span>
      <span class='klass identifier id'>klass</span> <span class='assign token'>=</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='constantize identifier id'>constantize</span>
      <span class='klass identifier id'>klass</span><span class='dot token'>.</span><span class='connection identifier id'>connection</span> <span class='assign token'>=</span> <span class='spec identifier id'>spec</span>
      <span class='conn identifier id'>conn</span> <span class='assign token'>=</span> <span class='active_connections identifier id'>active_connections</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='conn identifier id'>conn</span> <span class='or or kw'>or</span> <span class='raise identifier id'>raise</span> <span class='ConnectionNotEstablished constant id'>ConnectionNotEstablished</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="scan-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>scan</strong>(options = {}, &amp;code) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
HBase scanner utility &#8212; scans the table and executes code on each
record
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code"><span class='Entity constant id'>Entity</span><span class='dot token'>.</span><span class='scan identifier id'>scan</span><span class='lparen token'>(</span><span class='symbol val'>:batch_size</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>200</span><span class='rparen token'>)</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='e identifier id'>e</span><span class='bitor op'>|</span><span class='puts identifier id'>puts</span> <span class='dstring node'>&quot;#{e.name} is a child!&quot;</span> <span class='if if_mod kw'>if</span> <span class='e identifier id'>e</span><span class='dot token'>.</span><span class='parent identifier id'>parent</span><span class='rbrace token'>}</span>
</pre>
    
  </div>

  
    
    
    <h3>Options Hash (<tt>options</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="type">(<tt>Integer</tt>)</span>
          <span class="name">:batch_size</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><ul>
<li>number of records to retrieve from database with each scan iteration.

</li>
</ul>
</div>
        </tr>
      
        <li>
          <span class="type">(<tt>Block</tt>)</span>
          <span class="name">:code</span>
          <span class="default">
            
              <span class="na">N/A</span>
            
          </span>
          &mdash;<div class='inline'><ul>
<li>the code to execute (see example above for syntax)

</li>
</ul>
</div>
        </tr>
      
    </ul>
  
    
    

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 251</span>

<span class='def def kw'>def</span> <span class='scan identifier id'>scan</span><span class='lparen token'>(</span><span class='options identifier id'>options</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='bitand op'>&amp;</span><span class='code identifier id'>code</span><span class='rparen token'>)</span>
  <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='dup identifier id'>dup</span>
  <span class='limit identifier id'>limit</span> <span class='assign token'>=</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='symbol val'>:batch_size</span><span class='rparen token'>)</span> <span class='orop op'>||</span> <span class='integer val'>100</span>

  <span class='items_processed identifier id'>items_processed</span> <span class='assign token'>=</span> <span class='integer val'>0</span>

  <span class='comment val'># add an extra record for defining the next offset without duplicating records</span>
  <span class='limit identifier id'>limit</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span>
  <span class='last_row_id identifier id'>last_row_id</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span>

  <span class='while while kw'>while</span> <span class='true true kw'>true</span>
    <span class='items identifier id'>items</span> <span class='assign token'>=</span> <span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='symbol val'>:all</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='lbrace token'>{</span><span class='symbol val'>:limit</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='limit identifier id'>limit</span><span class='rbrace token'>}</span><span class='rparen token'>)</span><span class='rparen token'>)</span>

    <span class='comment val'># set the new offset as the extra record</span>
    <span class='unless unless kw'>unless</span> <span class='items identifier id'>items</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>
      <span class='items identifier id'>items</span><span class='dot token'>.</span><span class='delete_at identifier id'>delete_at</span><span class='lparen token'>(</span><span class='integer val'>0</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='items identifier id'>items</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='id identifier id'>id</span> <span class='eq op'>==</span> <span class='last_row_id identifier id'>last_row_id</span>

      <span class='break break kw'>break</span> <span class='if if_mod kw'>if</span> <span class='items identifier id'>items</span><span class='dot token'>.</span><span class='empty? fid id'>empty?</span>

      <span class='last_row_id identifier id'>last_row_id</span> <span class='assign token'>=</span> <span class='items identifier id'>items</span><span class='dot token'>.</span><span class='last identifier id'>last</span><span class='dot token'>.</span><span class='id identifier id'>id</span>
      <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:offset</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='last_row_id identifier id'>last_row_id</span>
      <span class='items_processed identifier id'>items_processed</span> <span class='opasgn op'>+=</span> <span class='items identifier id'>items</span><span class='dot token'>.</span><span class='size identifier id'>size</span>

      <span class='items identifier id'>items</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='item identifier id'>item</span><span class='bitor op'>|</span>
        <span class='code identifier id'>code</span><span class='dot token'>.</span><span class='call identifier id'>call</span><span class='lparen token'>(</span><span class='item identifier id'>item</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='else else kw'>else</span>
      <span class='break break kw'>break</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="set_default_family-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>set_default_family</strong>(name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Set the default column family used to store attributes that have no column
family set explicitly.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code"><span class='set_default_family identifier id'>set_default_family</span> <span class='symbol val'>:attr</span>  <span class='comment val'># instead of using :attribute as the default.</span>
</pre>
    
  </div>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


408
409
410</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 408</span>

<span class='def def kw'>def</span> <span class='set_default_family identifier id'>set_default_family</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
  <span class='@default_family ivar id'>@default_family</span> <span class='assign token'>=</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="set_table_name-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>set_table_name</strong>(name) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


393
394
395</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 393</span>

<span class='def def kw'>def</span> <span class='set_table_name identifier id'>set_table_name</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
  <span class='@table_name ivar id'>@table_name</span> <span class='assign token'>=</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="single_threaded_active_connections-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>single_threaded_active_connections</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


29
30
31</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/connection_adapters/abstract/connection_specification.rb', line 29</span>

<span class='def def kw'>def</span> <span class='single_threaded_active_connections identifier id'>single_threaded_active_connections</span> 
  <span class='@@active_connections ivar id'>@@active_connections</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="table_name-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>table_name</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


389
390
391</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 389</span>

<span class='def def kw'>def</span> <span class='table_name identifier id'>table_name</span>
  <span class='@table_name ivar id'>@table_name</span> <span class='orop op'>||</span> <span class='superclass identifier id'>superclass</span><span class='dot token'>.</span><span class='table_name identifier id'>table_name</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="thread_safe_active_connections-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>thread_safe_active_connections</strong> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='active_connections-class_method'>active_connections</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Retrieve the connection cache.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


25
26
27</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/connection_adapters/abstract/connection_specification.rb', line 25</span>

<span class='def def kw'>def</span> <span class='thread_safe_active_connections identifier id'>thread_safe_active_connections</span> 
  <span class='@@active_connections ivar id'>@@active_connections</span><span class='lbrack token'>[</span><span class='Thread constant id'>Thread</span><span class='dot token'>.</span><span class='current identifier id'>current</span><span class='dot token'>.</span><span class='object_id identifier id'>object_id</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="truncate-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>truncate</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Truncate the table for this model
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


385
386
387</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 385</span>

<span class='def def kw'>def</span> <span class='truncate identifier id'>truncate</span>
  <span class='connection identifier id'>connection</span><span class='dot token'>.</span><span class='truncate_table identifier id'>truncate_table</span><span class='lparen token'>(</span><span class='table_name identifier id'>table_name</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="update-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>update</strong>(id, attributes) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Finds the record from the passed <tt>id</tt>, instantly saves it with the
passed <tt>attributes</tt> (if the validation permits it), and returns it.
If the save fails under validations, the unsaved object is still returned.
</p>
<p>
The arguments may also be given as arrays in which case the update method
is called for each pair of <tt>id</tt> and <tt>attributes</tt> and an array
of objects is returned.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'><p>
of updating one record:
</p>
</div></h4>
      <pre class="example code"><span class='Person constant id'>Person</span><span class='dot token'>.</span><span class='update identifier id'>update</span><span class='lparen token'>(</span><span class='integer val'>15</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='symbol val'>:user_name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'Samuel'</span><span class='comma token'>,</span> <span class='symbol val'>:group</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'expert'</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
</pre>
    
      <h4><div class='inline'><p>
of updating multiple records:
</p>
</div></h4>
      <pre class="example code"><span class='people identifier id'>people</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span> <span class='integer val'>1</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span> <span class='string val'>&quot;first_name&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;David&quot;</span> <span class='rbrace token'>}</span><span class='comma token'>,</span> <span class='integer val'>2</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span> <span class='string val'>&quot;first_name&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>&quot;Jeremy&quot;</span><span class='rbrace token'>}</span> <span class='rbrace token'>}</span>
<span class='Person constant id'>Person</span><span class='dot token'>.</span><span class='update identifier id'>update</span><span class='lparen token'>(</span><span class='people identifier id'>people</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span><span class='comma token'>,</span> <span class='people identifier id'>people</span><span class='dot token'>.</span><span class='values identifier id'>values</span><span class='rparen token'>)</span>
</pre>
    
  </div>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


332
333
334
335
336
337
338
339
340
341</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 332</span>

<span class='def def kw'>def</span> <span class='update identifier id'>update</span><span class='lparen token'>(</span><span class='id identifier id'>id</span><span class='comma token'>,</span> <span class='attributes identifier id'>attributes</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='id identifier id'>id</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Array constant id'>Array</span><span class='rparen token'>)</span>
    <span class='idx identifier id'>idx</span> <span class='assign token'>=</span> <span class='integer val'>-1</span>
    <span class='id identifier id'>id</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='a identifier id'>a</span><span class='bitor op'>|</span> <span class='idx identifier id'>idx</span> <span class='opasgn op'>+=</span> <span class='integer val'>1</span><span class='semicolon token'>;</span> <span class='update identifier id'>update</span><span class='lparen token'>(</span><span class='a identifier id'>a</span><span class='comma token'>,</span> <span class='attributes identifier id'>attributes</span><span class='lbrack token'>[</span><span class='idx identifier id'>idx</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
  <span class='else else kw'>else</span>
    <span class='object identifier id'>object</span> <span class='assign token'>=</span> <span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='id identifier id'>id</span><span class='rparen token'>)</span>
    <span class='object identifier id'>object</span><span class='dot token'>.</span><span class='update_attributes identifier id'>update_attributes</span><span class='lparen token'>(</span><span class='attributes identifier id'>attributes</span><span class='rparen token'>)</span>
    <span class='object identifier id'>object</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="update_all-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>update_all</strong>(updates, conditions = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Updates all records with the SET-part of an SQL update statement in
<tt>updates</tt> and returns an integer with the number of rows updated. A
subset of the records can be selected by specifying <tt>conditions</tt>.
Example:
</p>
<pre class="code">
  <span class='Billing constant id'>Billing</span><span class='dot token'>.</span><span class='update_all identifier id'>update_all</span> <span class='string val'>&quot;category = 'authorized', approved = 1&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;author = 'David'&quot;</span>
</pre>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt><a href="NotImplemented.html" title="BigRecord::NotImplemented (class)">NotImplemented</a></tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


362
363
364</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 362</span>

<span class='def def kw'>def</span> <span class='update_all identifier id'>update_all</span><span class='lparen token'>(</span><span class='updates identifier id'>updates</span><span class='comma token'>,</span> <span class='conditions identifier id'>conditions</span> <span class='assign token'>=</span> <span class='nil nil kw'>nil</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='NotImplemented constant id'>NotImplemented</span><span class='comma token'>,</span> <span class='string val'>&quot;update_all&quot;</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="verify_active_connections!-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>verify_active_connections!</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Verify active connections.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


101
102
103
104
105
106
107
108
109
110
111</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/connection_adapters/abstract/connection_specification.rb', line 101</span>

<span class='def def kw'>def</span> <span class='verify_active_connections! fid id'>verify_active_connections!</span> 
  <span class='if if kw'>if</span> <span class='@@allow_concurrency ivar id'>@@allow_concurrency</span>
    <span class='remove_stale_cached_threads! fid id'>remove_stale_cached_threads!</span><span class='lparen token'>(</span><span class='@@active_connections ivar id'>@@active_connections</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='conn identifier id'>conn</span><span class='bitor op'>|</span>
      <span class='conn identifier id'>conn</span><span class='dot token'>.</span><span class='disconnect! fid id'>disconnect!</span>
    <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>

  <span class='active_connections identifier id'>active_connections</span><span class='dot token'>.</span><span class='each_value identifier id'>each_value</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='connection identifier id'>connection</span><span class='bitor op'>|</span>
    <span class='connection identifier id'>connection</span><span class='dot token'>.</span><span class='verify! fid id'>verify!</span><span class='lparen token'>(</span><span class='@@verification_timeout ivar id'>@@verification_timeout</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="view-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>view</strong>(name, *columns) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Macro for defining a named view to a list of columns.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code"><span class='view identifier id'>view</span> <span class='symbol val'>:front_page</span><span class='comma token'>,</span> <span class='symbol val'>:name</span><span class='comma token'>,</span> <span class='symbol val'>:title</span><span class='comma token'>,</span> <span class='symbol val'>:description</span>
<span class='view identifier id'>view</span> <span class='symbol val'>:summary</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='string val'>&quot;attribute:name&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;attribute:title&quot;</span><span class='rbrack token'>]</span>
</pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>)</span>
      
      
        <span class='name'>name</span>
      
      
      
        &mdash;
        <div class='inline'><p>
Give it an arbitrary name.
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>Array&lt;String, Symbol&gt;</tt>)</span>
      
      
        <span class='name'>columns</span>
      
      
      
        &mdash;
        <div class='inline'><p>
List of columns to associate to this view. Can use column aliases or fully
qualified names.
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


425
426
427
428
429
430
431
432
433</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 425</span>

<span class='def def kw'>def</span> <span class='view identifier id'>view</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='mult op'>*</span><span class='columns identifier id'>columns</span><span class='rparen token'>)</span>
  <span class='name identifier id'>name</span> <span class='assign token'>=</span> <span class='name identifier id'>name</span><span class='dot token'>.</span><span class='to_sym identifier id'>to_sym</span>
  <span class='@views_hash ivar id'>@views_hash</span> <span class='opasgn op'>||=</span> <span class='default_views identifier id'>default_views</span>

  <span class='comment val'># The other variables that are cached and depend on @views_hash need to be reloaded</span>
  <span class='invalidate_views identifier id'>invalidate_views</span>

  <span class='@views_hash ivar id'>@views_hash</span><span class='lbrack token'>[</span><span class='name identifier id'>name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='ConnectionAdapters constant id'>ConnectionAdapters</span><span class='colon2 op'>::</span><span class='View constant id'>View</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='columns identifier id'>columns</span><span class='dot token'>.</span><span class='flatten identifier id'>flatten</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="view_names-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>view_names</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Get a list of view names defined by <tt><a href="#view-class_method" title="BigRecord::Base.view (method)">view</a></tt>.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


441
442
443</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 441</span>

<span class='def def kw'>def</span> <span class='view_names identifier id'>view_names</span>
  <span class='@view_names ivar id'>@view_names</span> <span class='opasgn op'>||=</span> <span class='views_hash identifier id'>views_hash</span><span class='dot token'>.</span><span class='keys identifier id'>keys</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="views-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>views</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Get a list of all the views defined by the <tt><a href="#view-class_method" title="BigRecord::Base.view (method)">view</a></tt> macro for the model.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


436
437
438</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 436</span>

<span class='def def kw'>def</span> <span class='views identifier id'>views</span>
  <span class='@views ivar id'>@views</span> <span class='opasgn op'>||=</span> <span class='views_hash identifier id'>views_hash</span><span class='dot token'>.</span><span class='values identifier id'>values</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="views_hash-class_method">
  
    + (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>views_hash</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Get the full hash of views consisting of the name as keys, and the
<tt><a href="ConnectionAdapters/View.html" title="BigRecord::ConnectionAdapters::View (class)">ConnectionAdapters::View</a></tt> views.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 446</span>

<span class='def def kw'>def</span> <span class='views_hash identifier id'>views_hash</span>
  <span class='unless unless kw'>unless</span> <span class='@all_views_hash ivar id'>@all_views_hash</span>
    <span class='comment val'># add default hbase columns</span>
    <span class='@all_views_hash ivar id'>@all_views_hash</span> <span class='assign token'>=</span>
      <span class='if if kw'>if</span> <span class='self self kw'>self</span> <span class='eq op'>==</span> <span class='BigRecord constant id'>BigRecord</span><span class='colon2 op'>::</span><span class='Base constant id'>Base</span> <span class='comment val'># stop at Base</span>
         <span class='@views_hash ivar id'>@views_hash</span> <span class='assign token'>=</span> <span class='default_views identifier id'>default_views</span>
      <span class='else else kw'>else</span>
        <span class='if if kw'>if</span> <span class='@views_hash ivar id'>@views_hash</span>
          <span class='superclass identifier id'>superclass</span><span class='dot token'>.</span><span class='views_hash identifier id'>views_hash</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='default_views identifier id'>default_views</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='@views_hash ivar id'>@views_hash</span><span class='rparen token'>)</span>
        <span class='else else kw'>else</span>
          <span class='superclass identifier id'>superclass</span><span class='dot token'>.</span><span class='views_hash identifier id'>views_hash</span><span class='dot token'>.</span><span class='merge identifier id'>merge</span><span class='lparen token'>(</span><span class='default_views identifier id'>default_views</span><span class='rparen token'>)</span>
        <span class='end end kw'>end</span>
      <span class='end end kw'>end</span>
  <span class='end end kw'>end</span>
  <span class='@all_views_hash ivar id'>@all_views_hash</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="[]-instance_method">
  
    - (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>[]</strong>(attr_name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of the attribute identified by <tt>attr_name</tt> after
it has been typecast (for example, &quot;2004-12-12&quot; in a data column
is cast to a date object, like Date.new(2004, 12, 12)). (Alias for the
protected read_attribute method).
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


27
28
29
30
31
32
33</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 27</span>

<span class='def def kw'>def</span> <span class='aref op'>[]</span><span class='lparen token'>(</span><span class='attr_name identifier id'>attr_name</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='attr_name identifier id'>attr_name</span><span class='dot token'>.</span><span class='ends_with? fid id'>ends_with?</span><span class='lparen token'>(</span><span class='string val'>&quot;:&quot;</span><span class='rparen token'>)</span>
    <span class='read_family_attributes identifier id'>read_family_attributes</span><span class='lparen token'>(</span><span class='attr_name identifier id'>attr_name</span><span class='rparen token'>)</span>
  <span class='else else kw'>else</span>
    <span class='read_attribute identifier id'>read_attribute</span><span class='lparen token'>(</span><span class='attr_name identifier id'>attr_name</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="connection-instance_method">
  
    - (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>connection</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the connection currently associated with the class. This can also
be used to &quot;borrow&quot; the connection to do database work that
isn&#8217;t easily done without going straight to SQL.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


160
161
162</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/connection_adapters/abstract/connection_specification.rb', line 160</span>

<span class='def def kw'>def</span> <span class='connection identifier id'>connection</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='connection identifier id'>connection</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="destroy-instance_method">
  
    - (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>destroy</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Deletes the record in the database and freezes this instance to reflect
that no changes should be made (since they can&#8217;t be persisted).
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


162
163
164
165
166
167
168
169
170</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 162</span>

<span class='def def kw'>def</span> <span class='destroy identifier id'>destroy</span>
  <span class='unless unless kw'>unless</span> <span class='new_record? fid id'>new_record?</span>
    <span class='connection identifier id'>connection</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='table_name identifier id'>table_name</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='id identifier id'>id</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>

  <span class='comment val'># FIXME: this currently doesn't work because we write the attributes everytime we read them</span>
  <span class='comment val'># which means that we cannot read the attributes of a deleted record... it's bad</span>
<span class='comment val'>#      freeze</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="is_loaded?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>is_loaded?</strong>(name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


137
138
139
140</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 137</span>

<span class='def def kw'>def</span> <span class='is_loaded? fid id'>is_loaded?</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
  <span class='@loaded_columns ivar id'>@loaded_columns</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='@loaded_columns ivar id'>@loaded_columns</span><span class='dot token'>.</span><span class='include? fid id'>include?</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="new_record?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>new_record?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns true if this object hasn&#8217;t been saved yet &#8212; that is, a
record for the object doesn&#8217;t exist yet.
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


144
145
146</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 144</span>

<span class='def def kw'>def</span> <span class='new_record? fid id'>new_record?</span>
  <span class='@new_record ivar id'>@new_record</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="read_attribute-instance_method">
  
    - (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>read_attribute</strong>(attr_name, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of the attribute identified by <tt>attr_name</tt> after
it has been typecast (for example, &quot;2004-12-12&quot; in a data column
is cast to a date object, like Date.new(2004, 12, 12)).
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 37</span>

<span class='def def kw'>def</span> <span class='read_attribute identifier id'>read_attribute</span><span class='lparen token'>(</span><span class='attr_name identifier id'>attr_name</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='assign token'>=</span><span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='attr_name identifier id'>attr_name</span> <span class='assign token'>=</span> <span class='attr_name identifier id'>attr_name</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
  <span class='column identifier id'>column</span> <span class='assign token'>=</span> <span class='column_for_attribute identifier id'>column_for_attribute</span><span class='lparen token'>(</span><span class='attr_name identifier id'>attr_name</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='column identifier id'>column</span>
    <span class='comment val'># First check if the attribute is already in the attributes hash</span>
    <span class='if if kw'>if</span> <span class='@attributes ivar id'>@attributes</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='attr_name identifier id'>attr_name</span><span class='rparen token'>)</span> <span class='and and kw'>and</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='blank? fid id'>blank?</span>
      <span class='super super kw'>super</span><span class='lparen token'>(</span><span class='attr_name identifier id'>attr_name</span><span class='rparen token'>)</span>
    <span class='comment val'># Elsif the column exist, we try to lazy load it</span>
    <span class='elsif elsif kw'>elsif</span> <span class='notop op'>!</span><span class='lparen token'>(</span><span class='is_loaded? fid id'>is_loaded?</span><span class='lparen token'>(</span><span class='attr_name identifier id'>attr_name</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='and and kw'>and</span> <span class='attr_name identifier id'>attr_name</span> <span class='neq op'>!=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='primary_key identifier id'>primary_key</span> <span class='and and kw'>and</span> <span class='notop op'>!</span><span class='new_record? fid id'>new_record?</span>
      <span class='unless unless kw'>unless</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='all_attributes_loaded? fid id'>all_attributes_loaded?</span> <span class='and and kw'>and</span> <span class='attr_name identifier id'>attr_name</span> <span class='match op'>=~</span> <span class='dregexp node'>/\A#{self.class.default_family}:/</span>
        <span class='if if kw'>if</span> <span class='options identifier id'>options</span><span class='dot token'>.</span><span class='blank? fid id'>blank?</span>
          <span class='comment val'># Normal behavior</span>

          <span class='comment val'># Retrieve the version of the attribute matching the current record version</span>
          <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:timestamp</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='updated_at identifier id'>updated_at</span><span class='dot token'>.</span><span class='to_bigrecord_timestamp identifier id'>to_bigrecord_timestamp</span> <span class='if if_mod kw'>if</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='has_attribute? fid id'>has_attribute?</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{self.class.default_family}:updated_at&quot;</span><span class='rparen token'>)</span> <span class='and and kw'>and</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='updated_at identifier id'>updated_at</span>

          <span class='comment val'># get the content of the cell</span>
          <span class='value identifier id'>value</span> <span class='assign token'>=</span> <span class='connection identifier id'>connection</span><span class='dot token'>.</span><span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='table_name identifier id'>table_name</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='id identifier id'>id</span><span class='comma token'>,</span> <span class='attr_name identifier id'>attr_name</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>

          <span class='set_loaded identifier id'>set_loaded</span><span class='lparen token'>(</span><span class='attr_name identifier id'>attr_name</span><span class='rparen token'>)</span>
          <span class='write_attribute identifier id'>write_attribute</span><span class='lparen token'>(</span><span class='attr_name identifier id'>attr_name</span><span class='comma token'>,</span> <span class='column identifier id'>column</span><span class='dot token'>.</span><span class='type_cast identifier id'>type_cast</span><span class='lparen token'>(</span><span class='value identifier id'>value</span><span class='rparen token'>)</span><span class='rparen token'>)</span>
        <span class='else else kw'>else</span>
          <span class='comment val'># Special request... don't keep it in the attributes hash</span>
          <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:timestamp</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='updated_at identifier id'>updated_at</span><span class='dot token'>.</span><span class='to_bigrecord_timestamp identifier id'>to_bigrecord_timestamp</span> <span class='if if_mod kw'>if</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='has_attribute? fid id'>has_attribute?</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{self.class.default_family}:updated_at&quot;</span><span class='rparen token'>)</span> <span class='and and kw'>and</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='updated_at identifier id'>updated_at</span>

          <span class='comment val'># get the content of the cell</span>
          <span class='value identifier id'>value</span> <span class='assign token'>=</span> <span class='connection identifier id'>connection</span><span class='dot token'>.</span><span class='get identifier id'>get</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='table_name identifier id'>table_name</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='id identifier id'>id</span><span class='comma token'>,</span> <span class='attr_name identifier id'>attr_name</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>

          <span class='if if kw'>if</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:versions</span><span class='rbrack token'>]</span> <span class='and and kw'>and</span> <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:versions</span><span class='rbrack token'>]</span> <span class='gt op'>&gt;</span> <span class='integer val'>1</span>
            <span class='value identifier id'>value</span><span class='dot token'>.</span><span class='collect identifier id'>collect</span><span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='v identifier id'>v</span><span class='bitor op'>|</span> <span class='column identifier id'>column</span><span class='dot token'>.</span><span class='type_cast identifier id'>type_cast</span><span class='lparen token'>(</span><span class='v identifier id'>v</span><span class='rparen token'>)</span> <span class='rbrace token'>}</span>
          <span class='else else kw'>else</span>
            <span class='column identifier id'>column</span><span class='dot token'>.</span><span class='type_cast identifier id'>type_cast</span><span class='lparen token'>(</span><span class='value identifier id'>value</span><span class='rparen token'>)</span>
          <span class='end end kw'>end</span>
        <span class='end end kw'>end</span>
      <span class='else else kw'>else</span>
        <span class='write_attribute identifier id'>write_attribute</span><span class='lparen token'>(</span><span class='attr_name identifier id'>attr_name</span><span class='comma token'>,</span> <span class='column identifier id'>column</span><span class='dot token'>.</span><span class='default identifier id'>default</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='else else kw'>else</span>
      <span class='write_attribute identifier id'>write_attribute</span><span class='lparen token'>(</span><span class='attr_name identifier id'>attr_name</span><span class='comma token'>,</span> <span class='column identifier id'>column</span><span class='dot token'>.</span><span class='default identifier id'>default</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='else else kw'>else</span>
    <span class='nil nil kw'>nil</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="read_family_attributes-instance_method">
  
    - (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>read_family_attributes</strong>(attr_name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Read an attribute that defines a column family.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 83</span>

<span class='def def kw'>def</span> <span class='read_family_attributes identifier id'>read_family_attributes</span><span class='lparen token'>(</span><span class='attr_name identifier id'>attr_name</span><span class='rparen token'>)</span>
  <span class='attr_name identifier id'>attr_name</span> <span class='assign token'>=</span> <span class='attr_name identifier id'>attr_name</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
  <span class='column identifier id'>column</span> <span class='assign token'>=</span> <span class='column_for_attribute identifier id'>column_for_attribute</span><span class='lparen token'>(</span><span class='attr_name identifier id'>attr_name</span><span class='rparen token'>)</span>
  <span class='if if kw'>if</span> <span class='column identifier id'>column</span>
    <span class='comment val'># First check if the attribute is already in the attributes hash</span>
    <span class='if if kw'>if</span> <span class='@attributes ivar id'>@attributes</span><span class='dot token'>.</span><span class='has_key? fid id'>has_key?</span><span class='lparen token'>(</span><span class='attr_name identifier id'>attr_name</span><span class='rparen token'>)</span>
      <span class='if if kw'>if</span> <span class='lparen token'>(</span><span class='values identifier id'>values</span> <span class='assign token'>=</span> <span class='@attributes ivar id'>@attributes</span><span class='lbrack token'>[</span><span class='attr_name identifier id'>attr_name</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='and and kw'>and</span> <span class='values identifier id'>values</span><span class='dot token'>.</span><span class='is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='Hash constant id'>Hash</span><span class='rparen token'>)</span>
        <span class='values identifier id'>values</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='primary_key identifier id'>primary_key</span><span class='rparen token'>)</span>
        <span class='casted_values identifier id'>casted_values</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
        <span class='values identifier id'>values</span><span class='dot token'>.</span><span class='each identifier id'>each</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='k identifier id'>k</span><span class='comma token'>,</span><span class='v identifier id'>v</span><span class='bitor op'>|</span> <span class='casted_values identifier id'>casted_values</span><span class='lbrack token'>[</span><span class='k identifier id'>k</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='column identifier id'>column</span><span class='dot token'>.</span><span class='type_cast identifier id'>type_cast</span><span class='lparen token'>(</span><span class='v identifier id'>v</span><span class='rparen token'>)</span><span class='rbrace token'>}</span>
        <span class='write_attribute identifier id'>write_attribute</span><span class='lparen token'>(</span><span class='attr_name identifier id'>attr_name</span><span class='comma token'>,</span> <span class='casted_values identifier id'>casted_values</span><span class='rparen token'>)</span>
      <span class='else else kw'>else</span>
        <span class='write_attribute identifier id'>write_attribute</span><span class='lparen token'>(</span><span class='attr_name identifier id'>attr_name</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>

    <span class='comment val'># Elsif the column exist, we try to lazy load it</span>
    <span class='elsif elsif kw'>elsif</span> <span class='notop op'>!</span><span class='lparen token'>(</span><span class='is_loaded? fid id'>is_loaded?</span><span class='lparen token'>(</span><span class='attr_name identifier id'>attr_name</span><span class='rparen token'>)</span><span class='rparen token'>)</span> <span class='and and kw'>and</span> <span class='attr_name identifier id'>attr_name</span> <span class='neq op'>!=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='primary_key identifier id'>primary_key</span> <span class='and and kw'>and</span> <span class='notop op'>!</span><span class='new_record? fid id'>new_record?</span>
      <span class='unless unless kw'>unless</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='all_attributes_loaded? fid id'>all_attributes_loaded?</span> <span class='and and kw'>and</span> <span class='attr_name identifier id'>attr_name</span> <span class='match op'>=~</span> <span class='dregexp node'>/\A#{self.class.default_family}:/</span>
        <span class='options identifier id'>options</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
        <span class='comment val'># Retrieve the version of the attribute matching the current record version</span>
        <span class='options identifier id'>options</span><span class='lbrack token'>[</span><span class='symbol val'>:timestamp</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='updated_at identifier id'>updated_at</span><span class='dot token'>.</span><span class='to_bigrecord_timestamp identifier id'>to_bigrecord_timestamp</span> <span class='if if_mod kw'>if</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='has_attribute? fid id'>has_attribute?</span><span class='lparen token'>(</span><span class='dstring node'>&quot;#{self.class.default_family}:updated_at&quot;</span><span class='rparen token'>)</span> <span class='and and kw'>and</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='updated_at identifier id'>updated_at</span>

        <span class='comment val'># get the content of the whole family</span>
        <span class='values identifier id'>values</span> <span class='assign token'>=</span> <span class='connection identifier id'>connection</span><span class='dot token'>.</span><span class='get_columns identifier id'>get_columns</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='table_name identifier id'>table_name</span><span class='comma token'>,</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='id identifier id'>id</span><span class='comma token'>,</span> <span class='lbrack token'>[</span><span class='attr_name identifier id'>attr_name</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='options identifier id'>options</span><span class='rparen token'>)</span>
        <span class='if if kw'>if</span> <span class='values identifier id'>values</span>
          <span class='values identifier id'>values</span><span class='dot token'>.</span><span class='delete identifier id'>delete</span><span class='lparen token'>(</span><span class='self self kw'>self</span><span class='dot token'>.</span><span class='class identifier id'>class</span><span class='dot token'>.</span><span class='primary_key identifier id'>primary_key</span><span class='rparen token'>)</span>
          <span class='casted_values identifier id'>casted_values</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
          <span class='values identifier id'>values</span><span class='dot token'>.</span><span class='each identifier id'>each</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='k identifier id'>k</span><span class='comma token'>,</span><span class='v identifier id'>v</span><span class='bitor op'>|</span>
            <span class='short_name identifier id'>short_name</span> <span class='assign token'>=</span> <span class='k identifier id'>k</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='string val'>&quot;:&quot;</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='integer val'>1</span><span class='rbrack token'>]</span>
            <span class='casted_values identifier id'>casted_values</span><span class='lbrack token'>[</span><span class='short_name identifier id'>short_name</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='column identifier id'>column</span><span class='dot token'>.</span><span class='type_cast identifier id'>type_cast</span><span class='lparen token'>(</span><span class='v identifier id'>v</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='short_name identifier id'>short_name</span>
            <span class='set_loaded identifier id'>set_loaded</span><span class='lparen token'>(</span><span class='k identifier id'>k</span><span class='rparen token'>)</span>
            <span class='write_attribute identifier id'>write_attribute</span><span class='lparen token'>(</span><span class='k identifier id'>k</span><span class='comma token'>,</span> <span class='casted_values identifier id'>casted_values</span><span class='lbrack token'>[</span><span class='short_name identifier id'>short_name</span><span class='rbrack token'>]</span><span class='rparen token'>)</span> <span class='if if_mod kw'>if</span> <span class='short_name identifier id'>short_name</span>
          <span class='end end kw'>end</span>
          <span class='write_attribute identifier id'>write_attribute</span><span class='lparen token'>(</span><span class='attr_name identifier id'>attr_name</span><span class='comma token'>,</span> <span class='casted_values identifier id'>casted_values</span><span class='rparen token'>)</span>
        <span class='else else kw'>else</span>
          <span class='set_loaded identifier id'>set_loaded</span><span class='lparen token'>(</span><span class='attr_name identifier id'>attr_name</span><span class='rparen token'>)</span>
          <span class='write_attribute identifier id'>write_attribute</span><span class='lparen token'>(</span><span class='attr_name identifier id'>attr_name</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
        <span class='end end kw'>end</span>
      <span class='else else kw'>else</span>
        <span class='write_attribute identifier id'>write_attribute</span><span class='lparen token'>(</span><span class='attr_name identifier id'>attr_name</span><span class='comma token'>,</span> <span class='column identifier id'>column</span><span class='dot token'>.</span><span class='default identifier id'>default</span><span class='rparen token'>)</span>
      <span class='end end kw'>end</span>
    <span class='else else kw'>else</span>
      <span class='write_attribute identifier id'>write_attribute</span><span class='lparen token'>(</span><span class='attr_name identifier id'>attr_name</span><span class='comma token'>,</span> <span class='column identifier id'>column</span><span class='dot token'>.</span><span class='default identifier id'>default</span><span class='rparen token'>)</span>
    <span class='end end kw'>end</span>
  <span class='else else kw'>else</span>
    <span class='nil nil kw'>nil</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="save-instance_method">
  
    - (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>save</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <ul>
<li>No record exists: Creates a new record with values matching those of the
object attributes.

</li>
<li>A record does exist: Updates the record with values matching those of the
object attributes.

</li>
</ul>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


150
151
152</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 150</span>

<span class='def def kw'>def</span> <span class='save identifier id'>save</span>
  <span class='create_or_update identifier id'>create_or_update</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="save!-instance_method">
  
    - (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>save!</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Attempts to save the record, but instead of just returning false if it
couldn&#8217;t happen, it raises a RecordNotSaved exception
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


156
157
158</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 156</span>

<span class='def def kw'>def</span> <span class='save! fid id'>save!</span>
  <span class='create_or_update identifier id'>create_or_update</span> <span class='orop op'>||</span> <span class='raise identifier id'>raise</span><span class='lparen token'>(</span><span class='RecordNotSaved constant id'>RecordNotSaved</span><span class='rparen token'>)</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="set_loaded-instance_method">
  
    - (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>set_loaded</strong>(name) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


132
133
134
135</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 132</span>

<span class='def def kw'>def</span> <span class='set_loaded identifier id'>set_loaded</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
  <span class='@loaded_columns ivar id'>@loaded_columns</span> <span class='opasgn op'>||=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='@loaded_columns ivar id'>@loaded_columns</span> <span class='lshft op'>&lt;&lt;</span> <span class='name identifier id'>name</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="update_attribute-instance_method">
  
    - (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>update_attribute</strong>(name, value) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Updates a single attribute and saves the record. This is especially useful
for boolean flags on existing records. Note: This method is overwritten by
the Validation module that&#8217;ll make sure that updates made with this
method doesn&#8217;t get subjected to validation checks. Hence, attributes
can be updated even if the full object isn&#8217;t valid.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


175
176
177
178</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 175</span>

<span class='def def kw'>def</span> <span class='update_attribute identifier id'>update_attribute</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='rparen token'>)</span>
  <span class='send identifier id'>send</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span> <span class='plus op'>+</span> <span class='string val'>'='</span><span class='comma token'>,</span> <span class='value identifier id'>value</span><span class='rparen token'>)</span>
  <span class='save identifier id'>save</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="update_attributes-instance_method">
  
    - (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>update_attributes</strong>(attributes) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Updates all the attributes from the passed-in Hash and saves the record. If
the object is invalid, the saving will fail and false will be returned.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


182
183
184
185</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 182</span>

<span class='def def kw'>def</span> <span class='update_attributes identifier id'>update_attributes</span><span class='lparen token'>(</span><span class='attributes identifier id'>attributes</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='attributes identifier id'>attributes</span> <span class='assign token'>=</span> <span class='attributes identifier id'>attributes</span>
  <span class='save identifier id'>save</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="update_attributes!-instance_method">
  
    - (<tt><a href="../Object.html" title="Object (class)">Object</a></tt>) <strong>update_attributes!</strong>(attributes) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Updates an object just like Base.update_attributes but calls save! instead
of save so an exception is raised if the record is invalid.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


188
189
190
191</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/big_record/base.rb', line 188</span>

<span class='def def kw'>def</span> <span class='update_attributes! fid id'>update_attributes!</span><span class='lparen token'>(</span><span class='attributes identifier id'>attributes</span><span class='rparen token'>)</span>
  <span class='self self kw'>self</span><span class='dot token'>.</span><span class='attributes identifier id'>attributes</span> <span class='assign token'>=</span> <span class='attributes identifier id'>attributes</span>
  <span class='save! fid id'>save!</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Wed May  5 15:03:30 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool">yard</a>
  0.5.4 (ruby-1.8.7).
</div>

  </body>
</html>